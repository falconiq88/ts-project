{"version":3,"file":"plugins.esm.js","sources":["../src/select.ts","../../../node_modules/regenerator-runtime/runtime.js","../src/delete.ts","../src/sdlInputs.ts"],"sourcesContent":["import { GraphQLResolveInfo } from 'graphql';\nimport { DMMF } from '@prisma/client/runtime';\n// @ts-ignore\nimport graphqlFields from 'graphql-fields';\n\n/**\n * Convert `info` to select object accepted by `prisma client`.\n * @param info - GraphQLResolveInfo.\n * @example\n * // Graphql query\n * {\n *    findManyUser{\n *      id\n *      posts(where: { title: { contains: \"a\" } }, first: 10) {\n *        id\n *        comments{\n *          id\n *        }\n *      }\n *    }\n * }\n * // convert to\n * {\n *  select: {\n *    id: true,\n *    posts: {\n *      select: { id: true, comments: { select: { id: true } } },\n *      where: { title: { contains: \"a\" } },\n *      first: 10\n *    }\n *  }\n * }\n *\n * // Use\n *\n * const select = new PrismaSelect(info);\n *\n * prisma.user.findMany({\n *  ...args,\n *  ...select.value,\n * })\n *\n **/\nexport class PrismaSelect {\n  private availableArgs = ['where', 'orderBy', 'skip', 'cursor', 'take'];\n  private allowedProps = ['_count'];\n  private isAggregate: boolean = false;\n\n  constructor(\n    private info: GraphQLResolveInfo,\n    private options?: {\n      defaultFields?: {\n        [key: string]:\n          | { [key: string]: boolean }\n          | ((select: any) => { [key: string]: boolean });\n      };\n      dmmf?: DMMF.Document[];\n    },\n  ) {}\n\n  get value() {\n    const returnType = this.info.returnType\n      .toString()\n      .replace(/]/g, '')\n      .replace(/\\[/g, '')\n      .replace(/!/g, '');\n    this.isAggregate = returnType.includes('Aggregate');\n    return this.valueWithFilter(returnType);\n  }\n\n  get dataModel() {\n    const models: DMMF.Model[] = [];\n    if (this.options?.dmmf) {\n      this.options?.dmmf.forEach((doc) => {\n        models.push(...doc.datamodel.models);\n      });\n    } else {\n      const { Prisma } = require('@prisma/client');\n      if (Prisma.dmmf && Prisma.dmmf.datamodel) {\n        models.push(...Prisma.dmmf.datamodel.models);\n      }\n    }\n    return models;\n  }\n\n  get defaultFields() {\n    return this.options?.defaultFields;\n  }\n\n  private get fields() {\n    return graphqlFields(\n      this.info,\n      {},\n      {\n        excludedFields: ['__typename'],\n        processArguments: true,\n      },\n    );\n  }\n\n  private static getModelMap(docs?: string, name?: string) {\n    const value = docs?.match(/@PrismaSelect.map\\(\\[(.*?)\\]\\)/);\n    if (value && name) {\n      const asArray = value[1]\n        .replace(/ /g, '')\n        .split(',')\n        .filter((v) => v);\n      return asArray.includes(name);\n    }\n    return false;\n  }\n\n  private model(name?: string) {\n    return this.dataModel.find(\n      (item) =>\n        item.name === name ||\n        PrismaSelect.getModelMap(item.documentation, name),\n    );\n  }\n\n  private field(name: string, model?: DMMF.Model) {\n    return model?.fields.find((item) => item.name === name);\n  }\n\n  static isObject(item: any) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n  }\n\n  static mergeDeep(target: any, ...sources: any[]): any {\n    if (!sources.length) return target;\n    const source: any = sources.shift();\n\n    if (PrismaSelect.isObject(target) && PrismaSelect.isObject(source)) {\n      for (const key in source) {\n        if (PrismaSelect.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, { [key]: {} });\n          PrismaSelect.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, { [key]: source[key] });\n        }\n      }\n    }\n\n    return PrismaSelect.mergeDeep(target, ...sources);\n  }\n\n  /**\n   * Get nested value from select object.\n   * @param field - name of field in select object.\n   * @param filterBy - Model name as you have in schema.prisma file.\n   * @param mergeObject\n   * @example\n   * // Graphql query\n   * {\n   *    findManyUser{\n   *      id\n   *      posts{\n   *        id\n   *        comments{\n   *          id\n   *        }\n   *      }\n   *    }\n   * }\n   *\n   * // when you need to get more nested fields just add `.`\n   * PrismaSelect.valueOf('posts.comments', 'Comment');\n   * // return\n   * { select: { id: true } }\n   *\n   * PrismaSelect.valueOf('posts', 'Post');\n   *\n   * // return\n   * { select: { id: true, comments: { select: { id: true } } } }\n   *\n   **/\n  valueOf(field: string, filterBy?: string, mergeObject: any = {}) {\n    const splitItem = field.split('.');\n    let newValue = this.getSelect(this.fields);\n    for (const field of splitItem) {\n      if (this.isAggregate && newValue.hasOwnProperty(field)) {\n        newValue = newValue[field];\n      } else if (\n        !this.isAggregate &&\n        newValue.hasOwnProperty('select') &&\n        newValue.select.hasOwnProperty(field)\n      ) {\n        newValue = newValue.select[field];\n      } else {\n        return {};\n      }\n    }\n    return filterBy\n      ? PrismaSelect.mergeDeep(this.filterBy(filterBy, newValue), mergeObject)\n      : newValue;\n  }\n\n  /**\n   * Work with this method if your GraphQL type name not like Schema model name.\n   * @param modelName - Model name as you have in schema.prisma file.\n   * @example\n   * // normal call\n   * const select = new PrismaSelect(info).value\n   *\n   * // With filter will filter select object with provided schema model name\n   * const select = new PrismaSelect(info).valueWithFilter('User');\n   *\n   **/\n  valueWithFilter(modelName: string) {\n    return this.filterBy(modelName, this.getSelect(this.fields));\n  }\n\n  private filterBy(modelName: string, selectObject: any) {\n    const model = this.model(modelName);\n    if (model && typeof selectObject === 'object') {\n      let defaultFields = {};\n      if (this.defaultFields && this.defaultFields[modelName]) {\n        const modelFields = this.defaultFields[modelName];\n        defaultFields =\n          typeof modelFields === 'function'\n            ? modelFields(selectObject.select)\n            : modelFields;\n      }\n      const filteredObject = {\n        ...selectObject,\n        select: { ...defaultFields },\n      };\n      Object.keys(selectObject.select).forEach((key) => {\n        if (this.allowedProps.includes(key)) {\n          filteredObject.select[key] = selectObject.select[key];\n        } else {\n          const field = this.field(key, model);\n          if (field) {\n            if (field.kind !== 'object') {\n              filteredObject.select[key] = true;\n            } else {\n              const subModelFilter = this.filterBy(\n                field.type,\n                selectObject.select[key],\n              );\n              if(subModelFilter === true){\n                filteredObject.select[key] = true;\n              } else if (Object.keys(subModelFilter.select).length > 0) {\n                filteredObject.select[key] = subModelFilter;\n              }\n            }\n          }\n        }\n      });\n      return filteredObject;\n    } else {\n      return selectObject;\n    }\n  }\n\n  private getSelect(fields: any) {\n    const selectObject: any = this.isAggregate ? {} : { select: {} };\n    Object.keys(fields).forEach((key) => {\n      if (Object.keys(fields[key]).length === 0) {\n        if (this.isAggregate) {\n          selectObject[key] = true;\n        } else {\n          selectObject.select[key] = true;\n        }\n      } else if (key === '__arguments') {\n        fields[key].forEach((arg: any) => {\n          Object.keys(arg).forEach((key2) => {\n            if (this.availableArgs.includes(key2)) {\n              selectObject[key2] = arg[key2].value;\n            }\n          });\n        });\n      } else {\n        if (this.isAggregate) {\n          selectObject[key] = this.getSelect(fields[key]);\n        } else {\n          selectObject.select[key] = this.getSelect(fields[key]);\n        }\n      }\n    });\n    return selectObject;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { DMMF } from '@prisma/client/runtime';\n\ninterface DeleteData {\n  name: string;\n  where: object;\n}\n\nexport interface onDeleteArgs {\n  model: string;\n  where?: any;\n  deleteParent?: boolean;\n}\n\ninterface BatchPayload {\n  count: number;\n}\n\n/**\n * Handle all relation onDelete type\n * @param prisma - optional arg you can send your client class.\n * @param options - optional arg you can send your custom options { dmmf?: DMMF.Document }.\n * @example\n * const prisma = new PrismaClient({log: ['query']});\n * const prismaDelete = new PrismaDelete(prisma);\n *\n * // or new PrismaDelete(); we will create new client and use\n *\n * // use onDelete method\n * prismaDelete.onDelete({\n *  model: 'User',\n *  where: { id: 1 },\n *  deleteParent: true // if true will also delete user record default false\n * });\n *\n **/\nexport class PrismaDelete {\n  constructor(\n    private prisma: any,\n    private options?: { dmmf?: DMMF.Document },\n  ) {}\n\n  get getDMMF(): DMMF.Document {\n    const { Prisma } = require('@prisma/client');\n    return Prisma.dmmf;\n  }\n\n  get dataModel() {\n    if (this.options?.dmmf) {\n      return this.options?.dmmf?.datamodel;\n    } else {\n      return this.getDMMF?.datamodel;\n    }\n  }\n\n  private getModel(modelName: string) {\n    return this.dataModel?.models.find((item) => item.name === modelName);\n  }\n\n  private static getModelName(modelName: string) {\n    return modelName.charAt(0).toLowerCase() + modelName.slice(1);\n  }\n\n  private getFieldByType(modelName: string, fieldType: string) {\n    return this.getModel(modelName)?.fields.find(\n      (item) => item.type === fieldType && !item.isList,\n    );\n  }\n\n  private getModelIdFieldName(modelName: string) {\n    return this.getModel(modelName)?.fields.find((item) => item.isId)?.name;\n  }\n\n  private getOnDeleteFields(modelName: string, type: 'SET_NULL' | 'CASCADE') {\n    return this.getModel(modelName)?.fields.filter(\n      (item) =>\n        item.documentation?.includes('@onDelete') &&\n        item.documentation?.includes(type),\n    );\n  }\n\n  private async setFieldNull(modelName: string, field: DMMF.Field, where: any) {\n    const name = PrismaDelete.getModelName(modelName);\n    const modelId = this.getModelIdFieldName(modelName);\n    const fieldModelId = this.getModelIdFieldName(field.type);\n    if (modelId && fieldModelId && !field.isRequired) {\n      const fieldSelect = field.isList\n        ? { [field.name]: { select: { [fieldModelId]: true } } }\n        : {};\n      const results = await this.prisma[name].findMany({\n        where,\n        select: {\n          [modelId]: true,\n          ...fieldSelect,\n        },\n      });\n      for (const result of results) {\n        if (!(field.isList && result[field.name].length === 0)) {\n          await this.prisma[name].update({\n            where: {\n              [modelId]: result[modelId],\n            },\n            data: {\n              [field.name]: {\n                disconnect: field.isList ? result[field.name] : true,\n              },\n            },\n          });\n        }\n      }\n    }\n  }\n\n  private async getDeleteArray(\n    modelName: string,\n    whereInput: any,\n    includeParent = true,\n  ) {\n    const deleteArray: DeleteData[] = includeParent\n      ? [\n          {\n            name: PrismaDelete.getModelName(modelName),\n            where: whereInput,\n          },\n        ]\n      : [];\n\n    const nullFields = this.getOnDeleteFields(modelName, 'SET_NULL');\n    if (nullFields) {\n      for (const nullField of nullFields) {\n        await this.setFieldNull(modelName, nullField, whereInput);\n      }\n    }\n\n    const cascadeFields = this.getOnDeleteFields(modelName, 'CASCADE');\n    if (cascadeFields) {\n      for (const cascadeField of cascadeFields) {\n        const childField = this.getFieldByType(cascadeField.type, modelName);\n        if (childField) {\n          if (cascadeField.type !== modelName) {\n            deleteArray.push(\n              ...(await this.getDeleteArray(cascadeField.type, {\n                [childField.name]: whereInput,\n              })),\n            );\n          } else {\n            deleteArray.push({\n              name: PrismaDelete.getModelName(modelName),\n              where: {\n                [childField.name]: whereInput,\n              },\n            });\n          }\n        }\n      }\n    }\n\n    return deleteArray;\n  }\n  /**\n   * Handle all relation onDelete type\n   * @param onDeleteArgs - Object with model data.\n   * @return count of deleted records if deleteParent is true\n   * @example\n   * const prismaDelete = new PrismaDelete();\n   * prismaDelete.onDelete({\n   *  model: 'User',\n   *  where: { id: 1 },\n   *  deleteParent: true // if true will also delete user record default false\n   * });\n   *\n   **/\n  async onDelete({\n    model,\n    where,\n    deleteParent,\n  }: onDeleteArgs): Promise<BatchPayload | void> {\n    const results = (\n      await this.getDeleteArray(model, where, !!deleteParent)\n    ).reverse();\n    for (let i = 0; i < results.length; ++i) {\n      if (i + 1 === results.length && deleteParent) {\n        return await this.prisma[results[i].name].deleteMany({\n          where: results[i].where,\n        });\n      } else {\n        await this.prisma[results[i].name].deleteMany({\n          where: results[i].where,\n        });\n      }\n    }\n  }\n}\n","import { DMMF } from '@prisma/client/runtime';\nimport { GraphQLSchema } from 'graphql';\nimport { writeFileSync } from 'fs';\n\ninterface OptionsType {\n  dmmf?: DMMF.Document;\n  excludeFields?: string[];\n  filterInputs?: (input: DMMF.InputType) => DMMF.SchemaArg[];\n  doNotUseFieldUpdateOperationsInput?: boolean;\n}\n\nconst testedTypes: string[] = [];\n\nexport const hasEmptyTypeFields = (type: string, options?: OptionsType) => {\n  let schema = options?.dmmf?.schema;\n  if (!schema) {\n    const { Prisma } = require('@prisma/client');\n    schema = Prisma.dmmf?.schema;\n  }\n  testedTypes.push(type);\n  const inputObjectTypes = schema ? [...schema?.inputObjectTypes.prisma] : [];\n  if (schema?.inputObjectTypes.model)\n    inputObjectTypes.push(...schema.inputObjectTypes.model);\n\n  const inputType = inputObjectTypes.find((item) => item.name === type);\n  if (inputType) {\n    if (inputType.fields.length === 0) return true;\n    for (const field of inputType.fields) {\n      const fieldType = getInputType(field, options);\n      if (\n        fieldType.type !== type &&\n        fieldType.location === 'inputObjectTypes' &&\n        !testedTypes.includes(fieldType.type as string)\n      ) {\n        const state = hasEmptyTypeFields(fieldType.type as string, options);\n        if (state) return true;\n      }\n    }\n  }\n  return false;\n};\n\nexport const getInputType = (\n  field: DMMF.SchemaArg,\n  options?: { doNotUseFieldUpdateOperationsInput?: boolean },\n) => {\n  let index: number = 0;\n  if (\n    options?.doNotUseFieldUpdateOperationsInput &&\n    field.inputTypes.length > 1 &&\n    (field.inputTypes[1].type as string).endsWith('FieldUpdateOperationsInput')\n  ) {\n    return field.inputTypes[index];\n  }\n  if (\n    field.inputTypes.length > 1 &&\n    (field.inputTypes[1].location === 'inputObjectTypes' ||\n      field.inputTypes[1].isList ||\n      field.inputTypes[1].type === 'Json')\n  ) {\n    index = 1;\n  }\n  return field.inputTypes[index];\n};\n\nexport function generateInputsString(options?: OptionsType) {\n  let schema = options?.dmmf?.schema;\n  if (!schema) {\n    const { Prisma } = require('@prisma/client');\n    schema = Prisma.dmmf?.schema;\n  }\n  let fileContent = `\n  scalar DateTime\n  \n  type BatchPayload {\n  count: Int!\n}\n`;\n  if (schema) {\n    const enums = [...schema.enumTypes.prisma];\n    if (schema.enumTypes.model) enums.push(...schema.enumTypes.model);\n    enums.forEach((item) => {\n      fileContent += `enum ${item.name} {`;\n      item.values.forEach((item2) => {\n        fileContent += `\n        ${item2}`;\n      });\n      fileContent += `}\n  \n  `;\n    });\n    const inputObjectTypes = [...schema.inputObjectTypes.prisma];\n    if (schema.inputObjectTypes.model)\n      inputObjectTypes.push(...schema.inputObjectTypes.model);\n\n    inputObjectTypes.forEach((input) => {\n      if (input.fields.length > 0) {\n        fileContent += `input ${input.name} {\n      `;\n        const inputFields =\n          typeof options?.filterInputs === 'function'\n            ? options.filterInputs(input)\n            : input.fields;\n        inputFields\n          .filter((field) => !options?.excludeFields?.includes(field.name))\n          .forEach((field) => {\n            const inputType = getInputType(field, options);\n            const hasEmptyType =\n              inputType.location === 'inputObjectTypes' &&\n              hasEmptyTypeFields(inputType.type as string, options);\n            if (!hasEmptyType) {\n              fileContent += `${field.name}: ${\n                inputType.isList ? `[${inputType.type}!]` : inputType.type\n              }${field.isRequired ? '!' : ''}\n        `;\n            }\n          });\n        fileContent += `}\n    \n  `;\n      }\n    });\n\n    schema?.outputObjectTypes.prisma\n      .filter(\n        (type) =>\n          type.name.includes('Aggregate') ||\n          type.name.endsWith('CountOutputType'),\n      )\n      .forEach((type) => {\n        fileContent += `type ${type.name} {\n      `;\n        type.fields\n          .filter((field) => !options?.excludeFields?.includes(field.name))\n          .forEach((field) => {\n            fileContent += `${field.name}: ${\n              field.outputType.isList\n                ? `[${field.outputType.type}!]`\n                : field.outputType.type\n            }${!field.isNullable ? '!' : ''}\n        `;\n          });\n        fileContent += `}\n    \n  `;\n      });\n  }\n  return fileContent;\n}\n\nexport const sdlInputs = (options?: OptionsType) => {\n  const gql = require('graphql-tag');\n  return gql`\n    ${generateInputsString(options)}\n  `;\n};\n\nexport const generateGraphQlSDLFile = (\n  schema: GraphQLSchema,\n  path: string = 'schema.graphql',\n) => {\n  const { printSchema } = require('graphql');\n  writeFileSync(path, printSchema(schema));\n};\n"],"names":["PrismaSelect","info","options","getModelMap","docs","name","value","match","asArray","replace","split","filter","v","includes","model","dataModel","find","item","documentation","field","fields","isObject","Array","isArray","mergeDeep","target","sources","length","source","shift","key","Object","assign","valueOf","filterBy","mergeObject","splitItem","newValue","getSelect","isAggregate","hasOwnProperty","select","valueWithFilter","modelName","selectObject","defaultFields","modelFields","filteredObject","keys","forEach","allowedProps","kind","subModelFilter","type","arg","key2","availableArgs","returnType","toString","models","dmmf","doc","push","datamodel","require","Prisma","graphqlFields","excludedFields","processArguments","runtime","exports","Op","prototype","hasOwn","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","displayName","defineIteratorMethods","method","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","object","reverse","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","PrismaDelete","prisma","getModel","getModelName","toLowerCase","getFieldByType","fieldType","isList","getModelIdFieldName","isId","getOnDeleteFields","setFieldNull","where","modelId","fieldModelId","isRequired","fieldSelect","findMany","results","update","data","disconnect","getDeleteArray","whereInput","includeParent","deleteArray","nullFields","nullField","cascadeFields","cascadeField","childField","onDelete","deleteParent","deleteMany","getDMMF","testedTypes","hasEmptyTypeFields","schema","inputObjectTypes","inputType","getInputType","location","index","doNotUseFieldUpdateOperationsInput","inputTypes","endsWith","generateInputsString","fileContent","enums","enumTypes","item2","input","inputFields","filterInputs","excludeFields","hasEmptyType","outputObjectTypes","outputType","isNullable","sdlInputs","gql","generateGraphQlSDLFile","path","printSchema","writeFileSync"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsCaA,YAAb;AAKE,wBACUC,IADV,EAEUC,OAFV;AACU,aAAA,GAAAD,IAAA;AACA,gBAAA,GAAAC,OAAA;AANF,sBAAA,GAAgB,CAAC,OAAD,EAAU,SAAV,EAAqB,MAArB,EAA6B,QAA7B,EAAuC,MAAvC,CAAhB;AACA,qBAAA,GAAe,CAAC,QAAD,CAAf;AACA,oBAAA,GAAuB,KAAvB;AAYJ;;AAfN,eAyDiBC,WAzDjB,GAyDU,qBAAmBC,IAAnB,EAAkCC,IAAlC;AACN,QAAMC,KAAK,GAAGF,IAAH,oBAAGA,IAAI,CAAEG,KAAN,CAAY,gCAAZ,CAAd;;AACA,QAAID,KAAK,IAAID,IAAb,EAAmB;AACjB,UAAMG,OAAO,GAAGF,KAAK,CAAC,CAAD,CAAL,CACbG,OADa,CACL,IADK,EACC,EADD,EAEbC,KAFa,CAEP,GAFO,EAGbC,MAHa,CAGN,UAACC,CAAD;AAAA,eAAOA,CAAP;AAAA,OAHM,CAAhB;AAIA,aAAOJ,OAAO,CAACK,QAAR,CAAiBR,IAAjB,CAAP;AACD;;AACD,WAAO,KAAP;AACD,GAnEH;;AAAA;;AAAA,SAqEUS,KArEV,GAqEU,eAAMT,IAAN;AACN,WAAO,KAAKU,SAAL,CAAeC,IAAf,CACL,UAACC,IAAD;AAAA,aACEA,IAAI,CAACZ,IAAL,KAAcA,IAAd,IACAL,YAAY,CAACG,WAAb,CAAyBc,IAAI,CAACC,aAA9B,EAA6Cb,IAA7C,CAFF;AAAA,KADK,CAAP;AAKD,GA3EH;;AAAA,SA6EUc,KA7EV,GA6EU,eAAMd,IAAN,EAAoBS,KAApB;AACN,WAAOA,KAAP,oBAAOA,KAAK,CAAEM,MAAP,CAAcJ,IAAd,CAAmB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACZ,IAAL,KAAcA,IAAxB;AAAA,KAAnB,CAAP;AACD,GA/EH;;AAAA,eAiFSgB,QAjFT,GAiFE,kBAAgBJ,IAAhB;AACE,WAAOA,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAAxB,IAAoC,CAACK,KAAK,CAACC,OAAN,CAAcN,IAAd,CAA5C;AACD,GAnFH;;AAAA,eAqFSO,SArFT,GAqFE,mBAAiBC,MAAjB;sCAAiCC;AAAAA,MAAAA;;;AAC/B,QAAI,CAACA,OAAO,CAACC,MAAb,EAAqB,OAAOF,MAAP;AACrB,QAAMG,MAAM,GAAQF,OAAO,CAACG,KAAR,EAApB;;AAEA,QAAI7B,YAAY,CAACqB,QAAb,CAAsBI,MAAtB,KAAiCzB,YAAY,CAACqB,QAAb,CAAsBO,MAAtB,CAArC,EAAoE;AAClE,WAAK,IAAME,GAAX,IAAkBF,MAAlB,EAA0B;AACxB,YAAI5B,YAAY,CAACqB,QAAb,CAAsBO,MAAM,CAACE,GAAD,CAA5B,CAAJ,EAAwC;AAAA;;AACtC,cAAI,CAACL,MAAM,CAACK,GAAD,CAAX,EAAkBC,MAAM,CAACC,MAAP,CAAcP,MAAd,uCAAyBK,GAAzB,IAA+B,EAA/B;AAClB9B,UAAAA,YAAY,CAACwB,SAAb,CAAuBC,MAAM,CAACK,GAAD,CAA7B,EAAoCF,MAAM,CAACE,GAAD,CAA1C;AACD,SAHD,MAGO;AAAA;;AACLC,UAAAA,MAAM,CAACC,MAAP,CAAcP,MAAd,yCAAyBK,GAAzB,IAA+BF,MAAM,CAACE,GAAD,CAArC;AACD;AACF;AACF;;AAED,WAAO9B,YAAY,CAACwB,SAAb,OAAAxB,YAAY,GAAWyB,MAAX,SAAsBC,OAAtB,EAAnB;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAvGF;;AAAA,SAqIEO,OArIF,GAqIE,iBAAQd,KAAR,EAAuBe,QAAvB,EAA0CC,WAA1C;QAA0CA;AAAAA,MAAAA,cAAmB;;;AAC3D,QAAMC,SAAS,GAAGjB,KAAK,CAACT,KAAN,CAAY,GAAZ,CAAlB;AACA,QAAI2B,QAAQ,GAAG,KAAKC,SAAL,CAAe,KAAKlB,MAApB,CAAf;;AACA,yDAAoBgB,SAApB,wCAA+B;AAAA,UAApBjB,MAAoB;;AAC7B,UAAI,KAAKoB,WAAL,IAAoBF,QAAQ,CAACG,cAAT,CAAwBrB,MAAxB,CAAxB,EAAwD;AACtDkB,QAAAA,QAAQ,GAAGA,QAAQ,CAAClB,MAAD,CAAnB;AACD,OAFD,MAEO,IACL,CAAC,KAAKoB,WAAN,IACAF,QAAQ,CAACG,cAAT,CAAwB,QAAxB,CADA,IAEAH,QAAQ,CAACI,MAAT,CAAgBD,cAAhB,CAA+BrB,MAA/B,CAHK,EAIL;AACAkB,QAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAAT,CAAgBtB,MAAhB,CAAX;AACD,OANM,MAMA;AACL,eAAO,EAAP;AACD;AACF;;AACD,WAAOe,QAAQ,GACXlC,YAAY,CAACwB,SAAb,CAAuB,KAAKU,QAAL,CAAcA,QAAd,EAAwBG,QAAxB,CAAvB,EAA0DF,WAA1D,CADW,GAEXE,QAFJ;AAGD;AAED;;;;;;;;;;;AA1JF;;AAAA,SAqKEK,eArKF,GAqKE,yBAAgBC,SAAhB;AACE,WAAO,KAAKT,QAAL,CAAcS,SAAd,EAAyB,KAAKL,SAAL,CAAe,KAAKlB,MAApB,CAAzB,CAAP;AACD,GAvKH;;AAAA,SAyKUc,QAzKV,GAyKU,kBAASS,SAAT,EAA4BC,YAA5B;;;AACN,QAAM9B,KAAK,GAAG,KAAKA,KAAL,CAAW6B,SAAX,CAAd;;AACA,QAAI7B,KAAK,IAAI,OAAO8B,YAAP,KAAwB,QAArC,EAA+C;AAC7C,UAAIC,aAAa,GAAG,EAApB;;AACA,UAAI,KAAKA,aAAL,IAAsB,KAAKA,aAAL,CAAmBF,SAAnB,CAA1B,EAAyD;AACvD,YAAMG,WAAW,GAAG,KAAKD,aAAL,CAAmBF,SAAnB,CAApB;AACAE,QAAAA,aAAa,GACX,OAAOC,WAAP,KAAuB,UAAvB,GACIA,WAAW,CAACF,YAAY,CAACH,MAAd,CADf,GAEIK,WAHN;AAID;;AACD,UAAMC,cAAc,gBACfH,YADe;AAElBH,QAAAA,MAAM,eAAOI,aAAP;AAFY,QAApB;;AAIAd,MAAAA,MAAM,CAACiB,IAAP,CAAYJ,YAAY,CAACH,MAAzB,EAAiCQ,OAAjC,CAAyC,UAACnB,GAAD;AACvC,YAAI,KAAI,CAACoB,YAAL,CAAkBrC,QAAlB,CAA2BiB,GAA3B,CAAJ,EAAqC;AACnCiB,UAAAA,cAAc,CAACN,MAAf,CAAsBX,GAAtB,IAA6Bc,YAAY,CAACH,MAAb,CAAoBX,GAApB,CAA7B;AACD,SAFD,MAEO;AACL,cAAMX,KAAK,GAAG,KAAI,CAACA,KAAL,CAAWW,GAAX,EAAgBhB,KAAhB,CAAd;;AACA,cAAIK,KAAJ,EAAW;AACT,gBAAIA,KAAK,CAACgC,IAAN,KAAe,QAAnB,EAA6B;AAC3BJ,cAAAA,cAAc,CAACN,MAAf,CAAsBX,GAAtB,IAA6B,IAA7B;AACD,aAFD,MAEO;AACL,kBAAMsB,cAAc,GAAG,KAAI,CAAClB,QAAL,CACrBf,KAAK,CAACkC,IADe,EAErBT,YAAY,CAACH,MAAb,CAAoBX,GAApB,CAFqB,CAAvB;;AAIA,kBAAGsB,cAAc,KAAK,IAAtB,EAA2B;AACzBL,gBAAAA,cAAc,CAACN,MAAf,CAAsBX,GAAtB,IAA6B,IAA7B;AACD,eAFD,MAEO,IAAIC,MAAM,CAACiB,IAAP,CAAYI,cAAc,CAACX,MAA3B,EAAmCd,MAAnC,GAA4C,CAAhD,EAAmD;AACxDoB,gBAAAA,cAAc,CAACN,MAAf,CAAsBX,GAAtB,IAA6BsB,cAA7B;AACD;AACF;AACF;AACF;AACF,OArBD;AAsBA,aAAOL,cAAP;AACD,KApCD,MAoCO;AACL,aAAOH,YAAP;AACD;AACF,GAlNH;;AAAA,SAoNUN,SApNV,GAoNU,mBAAUlB,MAAV;;;AACN,QAAMwB,YAAY,GAAQ,KAAKL,WAAL,GAAmB,EAAnB,GAAwB;AAAEE,MAAAA,MAAM,EAAE;AAAV,KAAlD;AACAV,IAAAA,MAAM,CAACiB,IAAP,CAAY5B,MAAZ,EAAoB6B,OAApB,CAA4B,UAACnB,GAAD;AAC1B,UAAIC,MAAM,CAACiB,IAAP,CAAY5B,MAAM,CAACU,GAAD,CAAlB,EAAyBH,MAAzB,KAAoC,CAAxC,EAA2C;AACzC,YAAI,MAAI,CAACY,WAAT,EAAsB;AACpBK,UAAAA,YAAY,CAACd,GAAD,CAAZ,GAAoB,IAApB;AACD,SAFD,MAEO;AACLc,UAAAA,YAAY,CAACH,MAAb,CAAoBX,GAApB,IAA2B,IAA3B;AACD;AACF,OAND,MAMO,IAAIA,GAAG,KAAK,aAAZ,EAA2B;AAChCV,QAAAA,MAAM,CAACU,GAAD,CAAN,CAAYmB,OAAZ,CAAoB,UAACK,GAAD;AAClBvB,UAAAA,MAAM,CAACiB,IAAP,CAAYM,GAAZ,EAAiBL,OAAjB,CAAyB,UAACM,IAAD;AACvB,gBAAI,MAAI,CAACC,aAAL,CAAmB3C,QAAnB,CAA4B0C,IAA5B,CAAJ,EAAuC;AACrCX,cAAAA,YAAY,CAACW,IAAD,CAAZ,GAAqBD,GAAG,CAACC,IAAD,CAAH,CAAUjD,KAA/B;AACD;AACF,WAJD;AAKD,SAND;AAOD,OARM,MAQA;AACL,YAAI,MAAI,CAACiC,WAAT,EAAsB;AACpBK,UAAAA,YAAY,CAACd,GAAD,CAAZ,GAAoB,MAAI,CAACQ,SAAL,CAAelB,MAAM,CAACU,GAAD,CAArB,CAApB;AACD,SAFD,MAEO;AACLc,UAAAA,YAAY,CAACH,MAAb,CAAoBX,GAApB,IAA2B,MAAI,CAACQ,SAAL,CAAelB,MAAM,CAACU,GAAD,CAArB,CAA3B;AACD;AACF;AACF,KAtBD;AAuBA,WAAOc,YAAP;AACD,GA9OH;;AAAA;AAAA;AAAA,SAiBE;AACE,UAAMa,UAAU,GAAG,KAAKxD,IAAL,CAAUwD,UAAV,CAChBC,QADgB,GAEhBjD,OAFgB,CAER,IAFQ,EAEF,EAFE,EAGhBA,OAHgB,CAGR,KAHQ,EAGD,EAHC,EAIhBA,OAJgB,CAIR,IAJQ,EAIF,EAJE,CAAnB;AAKA,WAAK8B,WAAL,GAAmBkB,UAAU,CAAC5C,QAAX,CAAoB,WAApB,CAAnB;AACA,aAAO,KAAK6B,eAAL,CAAqBe,UAArB,CAAP;AACD;AAzBH;AAAA;AAAA,SA2BE;;;AACE,UAAME,MAAM,GAAiB,EAA7B;;AACA,2BAAI,KAAKzD,OAAT,aAAI,cAAc0D,IAAlB,EAAwB;AAAA;;AACtB,+BAAK1D,OAAL,oCAAc0D,IAAd,CAAmBX,OAAnB,CAA2B,UAACY,GAAD;AACzBF,UAAAA,MAAM,CAACG,IAAP,OAAAH,MAAM,EAASE,GAAG,CAACE,SAAJ,CAAcJ,MAAvB,CAAN;AACD,SAFD;AAGD,OAJD,MAIO;AACL,uBAAmBK,OAAO,CAAC,gBAAD,CAA1B;AAAA,YAAQC,MAAR,YAAQA,MAAR;;AACA,YAAIA,MAAM,CAACL,IAAP,IAAeK,MAAM,CAACL,IAAP,CAAYG,SAA/B,EAA0C;AACxCJ,UAAAA,MAAM,CAACG,IAAP,OAAAH,MAAM,EAASM,MAAM,CAACL,IAAP,CAAYG,SAAZ,CAAsBJ,MAA/B,CAAN;AACD;AACF;;AACD,aAAOA,MAAP;AACD;AAxCH;AAAA;AAAA,SA0CE;;;AACE,+BAAO,KAAKzD,OAAZ,qBAAO,eAAc2C,aAArB;AACD;AA5CH;AAAA;AAAA,SA8CE;AACE,aAAOqB,aAAa,CAClB,KAAKjE,IADa,EAElB,EAFkB,EAGlB;AACEkE,QAAAA,cAAc,EAAE,CAAC,YAAD,CADlB;AAEEC,QAAAA,gBAAgB,EAAE;AAFpB,OAHkB,CAApB;AAQD;AAvDH;;AAAA;AAAA;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAIC,OAAO,GAAI,UAAUC,OAAV,EAAmB;AAChC;AAEA,QAAIC,EAAE,GAAGxC,MAAM,CAACyC,SAAhB;AACA,QAAIC,MAAM,GAAGF,EAAE,CAAC/B,cAAhB;AACA,QAAIkC,WAAJ,CALgC;;AAMhC,QAAIC,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,GAA+BA,MAA/B,GAAwC,EAAtD;AACA,QAAIC,cAAc,GAAGF,OAAO,CAACG,QAAR,IAAoB,YAAzC;AACA,QAAIC,mBAAmB,GAAGJ,OAAO,CAACK,aAAR,IAAyB,iBAAnD;AACA,QAAIC,iBAAiB,GAAGN,OAAO,CAACO,WAAR,IAAuB,eAA/C;;AAEA,aAASC,MAAT,CAAgBC,GAAhB,EAAqBtD,GAArB,EAA0BxB,KAA1B,EAAiC;AAC/ByB,MAAAA,MAAM,CAACsD,cAAP,CAAsBD,GAAtB,EAA2BtD,GAA3B,EAAgC;AAC9BxB,QAAAA,KAAK,EAAEA,KADuB;AAE9BgF,QAAAA,UAAU,EAAE,IAFkB;AAG9BC,QAAAA,YAAY,EAAE,IAHgB;AAI9BC,QAAAA,QAAQ,EAAE;AAJoB,OAAhC;AAMA,aAAOJ,GAAG,CAACtD,GAAD,CAAV;AACD;;AACD,QAAI;;AAEFqD,MAAAA,MAAM,CAAC,EAAD,EAAK,EAAL,CAAN;AACD,KAHD,CAGE,OAAOM,GAAP,EAAY;AACZN,MAAAA,MAAM,GAAG,gBAASC,GAAT,EAActD,GAAd,EAAmBxB,KAAnB,EAA0B;AACjC,eAAO8E,GAAG,CAACtD,GAAD,CAAH,GAAWxB,KAAlB;AACD,OAFD;AAGD;;AAED,aAASoF,IAAT,CAAcC,OAAd,EAAuBC,OAAvB,EAAgCC,IAAhC,EAAsCC,WAAtC,EAAmD;;AAEjD,UAAIC,cAAc,GAAGH,OAAO,IAAIA,OAAO,CAACpB,SAAR,YAA6BwB,SAAxC,GAAoDJ,OAApD,GAA8DI,SAAnF;AACA,UAAIC,SAAS,GAAGlE,MAAM,CAACmE,MAAP,CAAcH,cAAc,CAACvB,SAA7B,CAAhB;AACA,UAAI2B,OAAO,GAAG,IAAIC,OAAJ,CAAYN,WAAW,IAAI,EAA3B,CAAd,CAJiD;;;AAQjDG,MAAAA,SAAS,CAACI,OAAV,GAAoBC,gBAAgB,CAACX,OAAD,EAAUE,IAAV,EAAgBM,OAAhB,CAApC;AAEA,aAAOF,SAAP;AACD;;AACD3B,IAAAA,OAAO,CAACoB,IAAR,GAAeA,IAAf,CAzCgC;;;;;;;;;;;AAqDhC,aAASa,QAAT,CAAkBC,EAAlB,EAAsBpB,GAAtB,EAA2B9B,GAA3B,EAAgC;AAC9B,UAAI;AACF,eAAO;AAAED,UAAAA,IAAI,EAAE,QAAR;AAAkBC,UAAAA,GAAG,EAAEkD,EAAE,CAACC,IAAH,CAAQrB,GAAR,EAAa9B,GAAb;AAAvB,SAAP;AACD,OAFD,CAEE,OAAOmC,GAAP,EAAY;AACZ,eAAO;AAAEpC,UAAAA,IAAI,EAAE,OAAR;AAAiBC,UAAAA,GAAG,EAAEmC;AAAtB,SAAP;AACD;AACF;;AAED,QAAIiB,sBAAsB,GAAG,gBAA7B;AACA,QAAIC,sBAAsB,GAAG,gBAA7B;AACA,QAAIC,iBAAiB,GAAG,WAAxB;AACA,QAAIC,iBAAiB,GAAG,WAAxB,CAhEgC;;;AAoEhC,QAAIC,gBAAgB,GAAG,EAAvB,CApEgC;;;;;AA0EhC,aAASd,SAAT,GAAqB;;AACrB,aAASe,iBAAT,GAA6B;;AAC7B,aAASC,0BAAT,GAAsC,EA5EN;;;;AAgFhC,QAAIC,iBAAiB,GAAG,EAAxB;AACA9B,IAAAA,MAAM,CAAC8B,iBAAD,EAAoBpC,cAApB,EAAoC,YAAY;AACpD,aAAO,IAAP;AACD,KAFK,CAAN;AAIA,QAAIqC,QAAQ,GAAGnF,MAAM,CAACoF,cAAtB;AACA,QAAIC,uBAAuB,GAAGF,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAACG,MAAM,CAAC,EAAD,CAAP,CAAT,CAAlD;;AACA,QAAID,uBAAuB,IACvBA,uBAAuB,KAAK7C,EAD5B,IAEAE,MAAM,CAACgC,IAAP,CAAYW,uBAAZ,EAAqCvC,cAArC,CAFJ,EAE0D;;;AAGxDoC,MAAAA,iBAAiB,GAAGG,uBAApB;AACD;;AAED,QAAIE,EAAE,GAAGN,0BAA0B,CAACxC,SAA3B,GACPwB,SAAS,CAACxB,SAAV,GAAsBzC,MAAM,CAACmE,MAAP,CAAce,iBAAd,CADxB;AAEAF,IAAAA,iBAAiB,CAACvC,SAAlB,GAA8BwC,0BAA9B;AACA7B,IAAAA,MAAM,CAACmC,EAAD,EAAK,aAAL,EAAoBN,0BAApB,CAAN;AACA7B,IAAAA,MAAM,CAAC6B,0BAAD,EAA6B,aAA7B,EAA4CD,iBAA5C,CAAN;AACAA,IAAAA,iBAAiB,CAACQ,WAAlB,GAAgCpC,MAAM,CACpC6B,0BADoC,EAEpC/B,iBAFoC,EAGpC,mBAHoC,CAAtC,CApGgC;;;AA4GhC,aAASuC,qBAAT,CAA+BhD,SAA/B,EAA0C;AACxC,OAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4BvB,OAA5B,CAAoC,UAASwE,MAAT,EAAiB;AACnDtC,QAAAA,MAAM,CAACX,SAAD,EAAYiD,MAAZ,EAAoB,UAASnE,GAAT,EAAc;AACtC,iBAAO,KAAK+C,OAAL,CAAaoB,MAAb,EAAqBnE,GAArB,CAAP;AACD,SAFK,CAAN;AAGD,OAJD;AAKD;;AAEDgB,IAAAA,OAAO,CAACoD,mBAAR,GAA8B,UAASC,MAAT,EAAiB;AAC7C,UAAIC,IAAI,GAAG,OAAOD,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACE,WAAlD;AACA,aAAOD,IAAI,GACPA,IAAI,KAAKb,iBAAT;;AAGA,OAACa,IAAI,CAACL,WAAL,IAAoBK,IAAI,CAACvH,IAA1B,MAAoC,mBAJ7B,GAKP,KALJ;AAMD,KARD;;AAUAiE,IAAAA,OAAO,CAACwD,IAAR,GAAe,UAASH,MAAT,EAAiB;AAC9B,UAAI5F,MAAM,CAACgG,cAAX,EAA2B;AACzBhG,QAAAA,MAAM,CAACgG,cAAP,CAAsBJ,MAAtB,EAA8BX,0BAA9B;AACD,OAFD,MAEO;AACLW,QAAAA,MAAM,CAACK,SAAP,GAAmBhB,0BAAnB;AACA7B,QAAAA,MAAM,CAACwC,MAAD,EAAS1C,iBAAT,EAA4B,mBAA5B,CAAN;AACD;;AACD0C,MAAAA,MAAM,CAACnD,SAAP,GAAmBzC,MAAM,CAACmE,MAAP,CAAcoB,EAAd,CAAnB;AACA,aAAOK,MAAP;AACD,KATD,CA9HgC;;;;;;AA6IhCrD,IAAAA,OAAO,CAAC2D,KAAR,GAAgB,UAAS3E,GAAT,EAAc;AAC5B,aAAO;AAAE4E,QAAAA,OAAO,EAAE5E;AAAX,OAAP;AACD,KAFD;;AAIA,aAAS6E,aAAT,CAAuBlC,SAAvB,EAAkCmC,WAAlC,EAA+C;AAC7C,eAASC,MAAT,CAAgBZ,MAAhB,EAAwBnE,GAAxB,EAA6BgF,OAA7B,EAAsCC,MAAtC,EAA8C;AAC5C,YAAIC,MAAM,GAAGjC,QAAQ,CAACN,SAAS,CAACwB,MAAD,CAAV,EAAoBxB,SAApB,EAA+B3C,GAA/B,CAArB;;AACA,YAAIkF,MAAM,CAACnF,IAAP,KAAgB,OAApB,EAA6B;AAC3BkF,UAAAA,MAAM,CAACC,MAAM,CAAClF,GAAR,CAAN;AACD,SAFD,MAEO;AACL,cAAImF,MAAM,GAAGD,MAAM,CAAClF,GAApB;AACA,cAAIhD,KAAK,GAAGmI,MAAM,CAACnI,KAAnB;;AACA,cAAIA,KAAK,IACL,OAAOA,KAAP,KAAiB,QADjB,IAEAmE,MAAM,CAACgC,IAAP,CAAYnG,KAAZ,EAAmB,SAAnB,CAFJ,EAEmC;AACjC,mBAAO8H,WAAW,CAACE,OAAZ,CAAoBhI,KAAK,CAAC4H,OAA1B,EAAmCQ,IAAnC,CAAwC,UAASpI,KAAT,EAAgB;AAC7D+H,cAAAA,MAAM,CAAC,MAAD,EAAS/H,KAAT,EAAgBgI,OAAhB,EAAyBC,MAAzB,CAAN;AACD,aAFM,EAEJ,UAAS9C,GAAT,EAAc;AACf4C,cAAAA,MAAM,CAAC,OAAD,EAAU5C,GAAV,EAAe6C,OAAf,EAAwBC,MAAxB,CAAN;AACD,aAJM,CAAP;AAKD;;AAED,iBAAOH,WAAW,CAACE,OAAZ,CAAoBhI,KAApB,EAA2BoI,IAA3B,CAAgC,UAASC,SAAT,EAAoB;;;;AAIzDF,YAAAA,MAAM,CAACnI,KAAP,GAAeqI,SAAf;AACAL,YAAAA,OAAO,CAACG,MAAD,CAAP;AACD,WANM,EAMJ,UAASG,KAAT,EAAgB;;;AAGjB,mBAAOP,MAAM,CAAC,OAAD,EAAUO,KAAV,EAAiBN,OAAjB,EAA0BC,MAA1B,CAAb;AACD,WAVM,CAAP;AAWD;AACF;;AAED,UAAIM,eAAJ;;AAEA,eAASC,OAAT,CAAiBrB,MAAjB,EAAyBnE,GAAzB,EAA8B;AAC5B,iBAASyF,0BAAT,GAAsC;AACpC,iBAAO,IAAIX,WAAJ,CAAgB,UAASE,OAAT,EAAkBC,MAAlB,EAA0B;AAC/CF,YAAAA,MAAM,CAACZ,MAAD,EAASnE,GAAT,EAAcgF,OAAd,EAAuBC,MAAvB,CAAN;AACD,WAFM,CAAP;AAGD;;AAED,eAAOM,eAAe;;;;;;;;;;;;AAapBA,QAAAA,eAAe,GAAGA,eAAe,CAACH,IAAhB,CAChBK,0BADgB;;AAIhBA,QAAAA,0BAJgB,CAAH,GAKXA,0BAA0B,EAlBhC;AAmBD,OA5D4C;;;;AAgE7C,WAAK1C,OAAL,GAAeyC,OAAf;AACD;;AAEDtB,IAAAA,qBAAqB,CAACW,aAAa,CAAC3D,SAAf,CAArB;AACAW,IAAAA,MAAM,CAACgD,aAAa,CAAC3D,SAAf,EAA0BO,mBAA1B,EAA+C,YAAY;AAC/D,aAAO,IAAP;AACD,KAFK,CAAN;AAGAT,IAAAA,OAAO,CAAC6D,aAAR,GAAwBA,aAAxB,CAxNgC;;;;AA6NhC7D,IAAAA,OAAO,CAAC0E,KAAR,GAAgB,UAASrD,OAAT,EAAkBC,OAAlB,EAA2BC,IAA3B,EAAiCC,WAAjC,EAA8CsC,WAA9C,EAA2D;AACzE,UAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4BA,WAAW,GAAGa,OAAd;AAE5B,UAAIC,IAAI,GAAG,IAAIf,aAAJ,CACTzC,IAAI,CAACC,OAAD,EAAUC,OAAV,EAAmBC,IAAnB,EAAyBC,WAAzB,CADK,EAETsC,WAFS,CAAX;AAKA,aAAO9D,OAAO,CAACoD,mBAAR,CAA4B9B,OAA5B,IACHsD,IADG;AAAA,QAEHA,IAAI,CAACC,IAAL,GAAYT,IAAZ,CAAiB,UAASD,MAAT,EAAiB;AAChC,eAAOA,MAAM,CAACW,IAAP,GAAcX,MAAM,CAACnI,KAArB,GAA6B4I,IAAI,CAACC,IAAL,EAApC;AACD,OAFD,CAFJ;AAKD,KAbD;;AAeA,aAAS7C,gBAAT,CAA0BX,OAA1B,EAAmCE,IAAnC,EAAyCM,OAAzC,EAAkD;AAChD,UAAIkD,KAAK,GAAG3C,sBAAZ;AAEA,aAAO,SAAS2B,MAAT,CAAgBZ,MAAhB,EAAwBnE,GAAxB,EAA6B;AAClC,YAAI+F,KAAK,KAAKzC,iBAAd,EAAiC;AAC/B,gBAAM,IAAI0C,KAAJ,CAAU,8BAAV,CAAN;AACD;;AAED,YAAID,KAAK,KAAKxC,iBAAd,EAAiC;AAC/B,cAAIY,MAAM,KAAK,OAAf,EAAwB;AACtB,kBAAMnE,GAAN;AACD,WAH8B;;;;AAO/B,iBAAOiG,UAAU,EAAjB;AACD;;AAEDpD,QAAAA,OAAO,CAACsB,MAAR,GAAiBA,MAAjB;AACAtB,QAAAA,OAAO,CAAC7C,GAAR,GAAcA,GAAd;;AAEA,eAAO,IAAP,EAAa;AACX,cAAIkG,QAAQ,GAAGrD,OAAO,CAACqD,QAAvB;;AACA,cAAIA,QAAJ,EAAc;AACZ,gBAAIC,cAAc,GAAGC,mBAAmB,CAACF,QAAD,EAAWrD,OAAX,CAAxC;;AACA,gBAAIsD,cAAJ,EAAoB;AAClB,kBAAIA,cAAc,KAAK3C,gBAAvB,EAAyC;AACzC,qBAAO2C,cAAP;AACD;AACF;;AAED,cAAItD,OAAO,CAACsB,MAAR,KAAmB,MAAvB,EAA+B;;;AAG7BtB,YAAAA,OAAO,CAACwD,IAAR,GAAexD,OAAO,CAACyD,KAAR,GAAgBzD,OAAO,CAAC7C,GAAvC;AAED,WALD,MAKO,IAAI6C,OAAO,CAACsB,MAAR,KAAmB,OAAvB,EAAgC;AACrC,gBAAI4B,KAAK,KAAK3C,sBAAd,EAAsC;AACpC2C,cAAAA,KAAK,GAAGxC,iBAAR;AACA,oBAAMV,OAAO,CAAC7C,GAAd;AACD;;AAED6C,YAAAA,OAAO,CAAC0D,iBAAR,CAA0B1D,OAAO,CAAC7C,GAAlC;AAED,WARM,MAQA,IAAI6C,OAAO,CAACsB,MAAR,KAAmB,QAAvB,EAAiC;AACtCtB,YAAAA,OAAO,CAAC2D,MAAR,CAAe,QAAf,EAAyB3D,OAAO,CAAC7C,GAAjC;AACD;;AAED+F,UAAAA,KAAK,GAAGzC,iBAAR;AAEA,cAAI4B,MAAM,GAAGjC,QAAQ,CAACZ,OAAD,EAAUE,IAAV,EAAgBM,OAAhB,CAArB;;AACA,cAAIqC,MAAM,CAACnF,IAAP,KAAgB,QAApB,EAA8B;;;AAG5BgG,YAAAA,KAAK,GAAGlD,OAAO,CAACiD,IAAR,GACJvC,iBADI,GAEJF,sBAFJ;;AAIA,gBAAI6B,MAAM,CAAClF,GAAP,KAAewD,gBAAnB,EAAqC;AACnC;AACD;;AAED,mBAAO;AACLxG,cAAAA,KAAK,EAAEkI,MAAM,CAAClF,GADT;AAEL8F,cAAAA,IAAI,EAAEjD,OAAO,CAACiD;AAFT,aAAP;AAKD,WAhBD,MAgBO,IAAIZ,MAAM,CAACnF,IAAP,KAAgB,OAApB,EAA6B;AAClCgG,YAAAA,KAAK,GAAGxC,iBAAR,CADkC;;;AAIlCV,YAAAA,OAAO,CAACsB,MAAR,GAAiB,OAAjB;AACAtB,YAAAA,OAAO,CAAC7C,GAAR,GAAckF,MAAM,CAAClF,GAArB;AACD;AACF;AACF,OAxED;AAyED,KAxT+B;;;;;;AA8ThC,aAASoG,mBAAT,CAA6BF,QAA7B,EAAuCrD,OAAvC,EAAgD;AAC9C,UAAIsB,MAAM,GAAG+B,QAAQ,CAAC1E,QAAT,CAAkBqB,OAAO,CAACsB,MAA1B,CAAb;;AACA,UAAIA,MAAM,KAAK/C,WAAf,EAA0B;;;AAGxByB,QAAAA,OAAO,CAACqD,QAAR,GAAmB,IAAnB;;AAEA,YAAIrD,OAAO,CAACsB,MAAR,KAAmB,OAAvB,EAAgC;;AAE9B,cAAI+B,QAAQ,CAAC1E,QAAT,CAAkB,QAAlB,CAAJ,EAAiC;;;AAG/BqB,YAAAA,OAAO,CAACsB,MAAR,GAAiB,QAAjB;AACAtB,YAAAA,OAAO,CAAC7C,GAAR,GAAcoB,WAAd;AACAgF,YAAAA,mBAAmB,CAACF,QAAD,EAAWrD,OAAX,CAAnB;;AAEA,gBAAIA,OAAO,CAACsB,MAAR,KAAmB,OAAvB,EAAgC;;;AAG9B,qBAAOX,gBAAP;AACD;AACF;;AAEDX,UAAAA,OAAO,CAACsB,MAAR,GAAiB,OAAjB;AACAtB,UAAAA,OAAO,CAAC7C,GAAR,GAAc,IAAIyG,SAAJ,CACZ,gDADY,CAAd;AAED;;AAED,eAAOjD,gBAAP;AACD;;AAED,UAAI0B,MAAM,GAAGjC,QAAQ,CAACkB,MAAD,EAAS+B,QAAQ,CAAC1E,QAAlB,EAA4BqB,OAAO,CAAC7C,GAApC,CAArB;;AAEA,UAAIkF,MAAM,CAACnF,IAAP,KAAgB,OAApB,EAA6B;AAC3B8C,QAAAA,OAAO,CAACsB,MAAR,GAAiB,OAAjB;AACAtB,QAAAA,OAAO,CAAC7C,GAAR,GAAckF,MAAM,CAAClF,GAArB;AACA6C,QAAAA,OAAO,CAACqD,QAAR,GAAmB,IAAnB;AACA,eAAO1C,gBAAP;AACD;;AAED,UAAI7G,IAAI,GAAGuI,MAAM,CAAClF,GAAlB;;AAEA,UAAI,CAAErD,IAAN,EAAY;AACVkG,QAAAA,OAAO,CAACsB,MAAR,GAAiB,OAAjB;AACAtB,QAAAA,OAAO,CAAC7C,GAAR,GAAc,IAAIyG,SAAJ,CAAc,kCAAd,CAAd;AACA5D,QAAAA,OAAO,CAACqD,QAAR,GAAmB,IAAnB;AACA,eAAO1C,gBAAP;AACD;;AAED,UAAI7G,IAAI,CAACmJ,IAAT,EAAe;;;AAGbjD,QAAAA,OAAO,CAACqD,QAAQ,CAACQ,UAAV,CAAP,GAA+B/J,IAAI,CAACK,KAApC,CAHa;;AAMb6F,QAAAA,OAAO,CAACgD,IAAR,GAAeK,QAAQ,CAACS,OAAxB,CANa;;;;;;;AAcb,YAAI9D,OAAO,CAACsB,MAAR,KAAmB,QAAvB,EAAiC;AAC/BtB,UAAAA,OAAO,CAACsB,MAAR,GAAiB,MAAjB;AACAtB,UAAAA,OAAO,CAAC7C,GAAR,GAAcoB,WAAd;AACD;AAEF,OAnBD,MAmBO;;AAEL,eAAOzE,IAAP;AACD,OAvE6C;;;;AA2E9CkG,MAAAA,OAAO,CAACqD,QAAR,GAAmB,IAAnB;AACA,aAAO1C,gBAAP;AACD,KA3Y+B;;;;AA+YhCU,IAAAA,qBAAqB,CAACF,EAAD,CAArB;AAEAnC,IAAAA,MAAM,CAACmC,EAAD,EAAKrC,iBAAL,EAAwB,WAAxB,CAAN,CAjZgC;;;;;;AAwZhCE,IAAAA,MAAM,CAACmC,EAAD,EAAKzC,cAAL,EAAqB,YAAW;AACpC,aAAO,IAAP;AACD,KAFK,CAAN;AAIAM,IAAAA,MAAM,CAACmC,EAAD,EAAK,UAAL,EAAiB,YAAW;AAChC,aAAO,oBAAP;AACD,KAFK,CAAN;;AAIA,aAAS4C,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,UAAIC,KAAK,GAAG;AAAEC,QAAAA,MAAM,EAAEF,IAAI,CAAC,CAAD;AAAd,OAAZ;;AAEA,UAAI,KAAKA,IAAT,EAAe;AACbC,QAAAA,KAAK,CAACE,QAAN,GAAiBH,IAAI,CAAC,CAAD,CAArB;AACD;;AAED,UAAI,KAAKA,IAAT,EAAe;AACbC,QAAAA,KAAK,CAACG,UAAN,GAAmBJ,IAAI,CAAC,CAAD,CAAvB;AACAC,QAAAA,KAAK,CAACI,QAAN,GAAiBL,IAAI,CAAC,CAAD,CAArB;AACD;;AAED,WAAKM,UAAL,CAAgB3G,IAAhB,CAAqBsG,KAArB;AACD;;AAED,aAASM,aAAT,CAAuBN,KAAvB,EAA8B;AAC5B,UAAI5B,MAAM,GAAG4B,KAAK,CAACO,UAAN,IAAoB,EAAjC;AACAnC,MAAAA,MAAM,CAACnF,IAAP,GAAc,QAAd;AACA,aAAOmF,MAAM,CAAClF,GAAd;AACA8G,MAAAA,KAAK,CAACO,UAAN,GAAmBnC,MAAnB;AACD;;AAED,aAASpC,OAAT,CAAiBN,WAAjB,EAA8B;;;;AAI5B,WAAK2E,UAAL,GAAkB,CAAC;AAAEJ,QAAAA,MAAM,EAAE;AAAV,OAAD,CAAlB;AACAvE,MAAAA,WAAW,CAAC7C,OAAZ,CAAoBiH,YAApB,EAAkC,IAAlC;AACA,WAAKU,KAAL,CAAW,IAAX;AACD;;AAEDtG,IAAAA,OAAO,CAACtB,IAAR,GAAe,UAAS6H,MAAT,EAAiB;AAC9B,UAAI7H,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIlB,GAAT,IAAgB+I,MAAhB,EAAwB;AACtB7H,QAAAA,IAAI,CAACc,IAAL,CAAUhC,GAAV;AACD;;AACDkB,MAAAA,IAAI,CAAC8H,OAAL,GAL8B;;;AAS9B,aAAO,SAAS3B,IAAT,GAAgB;AACrB,eAAOnG,IAAI,CAACrB,MAAZ,EAAoB;AAClB,cAAIG,GAAG,GAAGkB,IAAI,CAAC+H,GAAL,EAAV;;AACA,cAAIjJ,GAAG,IAAI+I,MAAX,EAAmB;AACjB1B,YAAAA,IAAI,CAAC7I,KAAL,GAAawB,GAAb;AACAqH,YAAAA,IAAI,CAACC,IAAL,GAAY,KAAZ;AACA,mBAAOD,IAAP;AACD;AACF,SARoB;;;;;AAarBA,QAAAA,IAAI,CAACC,IAAL,GAAY,IAAZ;AACA,eAAOD,IAAP;AACD,OAfD;AAgBD,KAzBD;;AA2BA,aAAS9B,MAAT,CAAgB2D,QAAhB,EAA0B;AACxB,UAAIA,QAAJ,EAAc;AACZ,YAAIC,cAAc,GAAGD,QAAQ,CAACnG,cAAD,CAA7B;;AACA,YAAIoG,cAAJ,EAAoB;AAClB,iBAAOA,cAAc,CAACxE,IAAf,CAAoBuE,QAApB,CAAP;AACD;;AAED,YAAI,OAAOA,QAAQ,CAAC7B,IAAhB,KAAyB,UAA7B,EAAyC;AACvC,iBAAO6B,QAAP;AACD;;AAED,YAAI,CAACE,KAAK,CAACF,QAAQ,CAACrJ,MAAV,CAAV,EAA6B;AAC3B,cAAIwJ,CAAC,GAAG,CAAC,CAAT;AAAA,cAAYhC,IAAI,GAAG,SAASA,IAAT,GAAgB;AACjC,mBAAO,EAAEgC,CAAF,GAAMH,QAAQ,CAACrJ,MAAtB,EAA8B;AAC5B,kBAAI8C,MAAM,CAACgC,IAAP,CAAYuE,QAAZ,EAAsBG,CAAtB,CAAJ,EAA8B;AAC5BhC,gBAAAA,IAAI,CAAC7I,KAAL,GAAa0K,QAAQ,CAACG,CAAD,CAArB;AACAhC,gBAAAA,IAAI,CAACC,IAAL,GAAY,KAAZ;AACA,uBAAOD,IAAP;AACD;AACF;;AAEDA,YAAAA,IAAI,CAAC7I,KAAL,GAAaoE,WAAb;AACAyE,YAAAA,IAAI,CAACC,IAAL,GAAY,IAAZ;AAEA,mBAAOD,IAAP;AACD,WAbD;;AAeA,iBAAOA,IAAI,CAACA,IAAL,GAAYA,IAAnB;AACD;AACF,OA7BuB;;;AAgCxB,aAAO;AAAEA,QAAAA,IAAI,EAAEI;AAAR,OAAP;AACD;;AACDjF,IAAAA,OAAO,CAAC+C,MAAR,GAAiBA,MAAjB;;AAEA,aAASkC,UAAT,GAAsB;AACpB,aAAO;AAAEjJ,QAAAA,KAAK,EAAEoE,WAAT;AAAoB0E,QAAAA,IAAI,EAAE;AAA1B,OAAP;AACD;;AAEDhD,IAAAA,OAAO,CAAC5B,SAAR,GAAoB;AAClBqD,MAAAA,WAAW,EAAEzB,OADK;AAGlBwE,MAAAA,KAAK,EAAE,eAASQ,aAAT,EAAwB;AAC7B,aAAKC,IAAL,GAAY,CAAZ;AACA,aAAKlC,IAAL,GAAY,CAAZ,CAF6B;;;AAK7B,aAAKQ,IAAL,GAAY,KAAKC,KAAL,GAAalF,WAAzB;AACA,aAAK0E,IAAL,GAAY,KAAZ;AACA,aAAKI,QAAL,GAAgB,IAAhB;AAEA,aAAK/B,MAAL,GAAc,MAAd;AACA,aAAKnE,GAAL,GAAWoB,WAAX;AAEA,aAAK+F,UAAL,CAAgBxH,OAAhB,CAAwByH,aAAxB;;AAEA,YAAI,CAACU,aAAL,EAAoB;AAClB,eAAK,IAAI/K,IAAT,IAAiB,IAAjB,EAAuB;;AAErB,gBAAIA,IAAI,CAACiL,MAAL,CAAY,CAAZ,MAAmB,GAAnB,IACA7G,MAAM,CAACgC,IAAP,CAAY,IAAZ,EAAkBpG,IAAlB,CADA,IAEA,CAAC6K,KAAK,CAAC,CAAC7K,IAAI,CAACkL,KAAL,CAAW,CAAX,CAAF,CAFV,EAE4B;AAC1B,mBAAKlL,IAAL,IAAaqE,WAAb;AACD;AACF;AACF;AACF,OA3BiB;AA6BlB8G,MAAAA,IAAI,EAAE,gBAAW;AACf,aAAKpC,IAAL,GAAY,IAAZ;AAEA,YAAIqC,SAAS,GAAG,KAAKhB,UAAL,CAAgB,CAAhB,CAAhB;AACA,YAAIiB,UAAU,GAAGD,SAAS,CAACd,UAA3B;;AACA,YAAIe,UAAU,CAACrI,IAAX,KAAoB,OAAxB,EAAiC;AAC/B,gBAAMqI,UAAU,CAACpI,GAAjB;AACD;;AAED,eAAO,KAAKqI,IAAZ;AACD,OAvCiB;AAyClB9B,MAAAA,iBAAiB,EAAE,2BAAS+B,SAAT,EAAoB;AACrC,YAAI,KAAKxC,IAAT,EAAe;AACb,gBAAMwC,SAAN;AACD;;AAED,YAAIzF,OAAO,GAAG,IAAd;;AACA,iBAAS0F,MAAT,CAAgBC,GAAhB,EAAqBC,MAArB,EAA6B;AAC3BvD,UAAAA,MAAM,CAACnF,IAAP,GAAc,OAAd;AACAmF,UAAAA,MAAM,CAAClF,GAAP,GAAasI,SAAb;AACAzF,UAAAA,OAAO,CAACgD,IAAR,GAAe2C,GAAf;;AAEA,cAAIC,MAAJ,EAAY;;;AAGV5F,YAAAA,OAAO,CAACsB,MAAR,GAAiB,MAAjB;AACAtB,YAAAA,OAAO,CAAC7C,GAAR,GAAcoB,WAAd;AACD;;AAED,iBAAO,CAAC,CAAEqH,MAAV;AACD;;AAED,aAAK,IAAIZ,CAAC,GAAG,KAAKV,UAAL,CAAgB9I,MAAhB,GAAyB,CAAtC,EAAyCwJ,CAAC,IAAI,CAA9C,EAAiD,EAAEA,CAAnD,EAAsD;AACpD,cAAIf,KAAK,GAAG,KAAKK,UAAL,CAAgBU,CAAhB,CAAZ;AACA,cAAI3C,MAAM,GAAG4B,KAAK,CAACO,UAAnB;;AAEA,cAAIP,KAAK,CAACC,MAAN,KAAiB,MAArB,EAA6B;;;;AAI3B,mBAAOwB,MAAM,CAAC,KAAD,CAAb;AACD;;AAED,cAAIzB,KAAK,CAACC,MAAN,IAAgB,KAAKgB,IAAzB,EAA+B;AAC7B,gBAAIW,QAAQ,GAAGvH,MAAM,CAACgC,IAAP,CAAY2D,KAAZ,EAAmB,UAAnB,CAAf;AACA,gBAAI6B,UAAU,GAAGxH,MAAM,CAACgC,IAAP,CAAY2D,KAAZ,EAAmB,YAAnB,CAAjB;;AAEA,gBAAI4B,QAAQ,IAAIC,UAAhB,EAA4B;AAC1B,kBAAI,KAAKZ,IAAL,GAAYjB,KAAK,CAACE,QAAtB,EAAgC;AAC9B,uBAAOuB,MAAM,CAACzB,KAAK,CAACE,QAAP,EAAiB,IAAjB,CAAb;AACD,eAFD,MAEO,IAAI,KAAKe,IAAL,GAAYjB,KAAK,CAACG,UAAtB,EAAkC;AACvC,uBAAOsB,MAAM,CAACzB,KAAK,CAACG,UAAP,CAAb;AACD;AAEF,aAPD,MAOO,IAAIyB,QAAJ,EAAc;AACnB,kBAAI,KAAKX,IAAL,GAAYjB,KAAK,CAACE,QAAtB,EAAgC;AAC9B,uBAAOuB,MAAM,CAACzB,KAAK,CAACE,QAAP,EAAiB,IAAjB,CAAb;AACD;AAEF,aALM,MAKA,IAAI2B,UAAJ,EAAgB;AACrB,kBAAI,KAAKZ,IAAL,GAAYjB,KAAK,CAACG,UAAtB,EAAkC;AAChC,uBAAOsB,MAAM,CAACzB,KAAK,CAACG,UAAP,CAAb;AACD;AAEF,aALM,MAKA;AACL,oBAAM,IAAIjB,KAAJ,CAAU,wCAAV,CAAN;AACD;AACF;AACF;AACF,OAnGiB;AAqGlBQ,MAAAA,MAAM,EAAE,gBAASzG,IAAT,EAAeC,GAAf,EAAoB;AAC1B,aAAK,IAAI6H,CAAC,GAAG,KAAKV,UAAL,CAAgB9I,MAAhB,GAAyB,CAAtC,EAAyCwJ,CAAC,IAAI,CAA9C,EAAiD,EAAEA,CAAnD,EAAsD;AACpD,cAAIf,KAAK,GAAG,KAAKK,UAAL,CAAgBU,CAAhB,CAAZ;;AACA,cAAIf,KAAK,CAACC,MAAN,IAAgB,KAAKgB,IAArB,IACA5G,MAAM,CAACgC,IAAP,CAAY2D,KAAZ,EAAmB,YAAnB,CADA,IAEA,KAAKiB,IAAL,GAAYjB,KAAK,CAACG,UAFtB,EAEkC;AAChC,gBAAI2B,YAAY,GAAG9B,KAAnB;AACA;AACD;AACF;;AAED,YAAI8B,YAAY,KACX7I,IAAI,KAAK,OAAT,IACAA,IAAI,KAAK,UAFE,CAAZ,IAGA6I,YAAY,CAAC7B,MAAb,IAAuB/G,GAHvB,IAIAA,GAAG,IAAI4I,YAAY,CAAC3B,UAJxB,EAIoC;;;AAGlC2B,UAAAA,YAAY,GAAG,IAAf;AACD;;AAED,YAAI1D,MAAM,GAAG0D,YAAY,GAAGA,YAAY,CAACvB,UAAhB,GAA6B,EAAtD;AACAnC,QAAAA,MAAM,CAACnF,IAAP,GAAcA,IAAd;AACAmF,QAAAA,MAAM,CAAClF,GAAP,GAAaA,GAAb;;AAEA,YAAI4I,YAAJ,EAAkB;AAChB,eAAKzE,MAAL,GAAc,MAAd;AACA,eAAK0B,IAAL,GAAY+C,YAAY,CAAC3B,UAAzB;AACA,iBAAOzD,gBAAP;AACD;;AAED,eAAO,KAAKqF,QAAL,CAAc3D,MAAd,CAAP;AACD,OArIiB;AAuIlB2D,MAAAA,QAAQ,EAAE,kBAAS3D,MAAT,EAAiBgC,QAAjB,EAA2B;AACnC,YAAIhC,MAAM,CAACnF,IAAP,KAAgB,OAApB,EAA6B;AAC3B,gBAAMmF,MAAM,CAAClF,GAAb;AACD;;AAED,YAAIkF,MAAM,CAACnF,IAAP,KAAgB,OAAhB,IACAmF,MAAM,CAACnF,IAAP,KAAgB,UADpB,EACgC;AAC9B,eAAK8F,IAAL,GAAYX,MAAM,CAAClF,GAAnB;AACD,SAHD,MAGO,IAAIkF,MAAM,CAACnF,IAAP,KAAgB,QAApB,EAA8B;AACnC,eAAKsI,IAAL,GAAY,KAAKrI,GAAL,GAAWkF,MAAM,CAAClF,GAA9B;AACA,eAAKmE,MAAL,GAAc,QAAd;AACA,eAAK0B,IAAL,GAAY,KAAZ;AACD,SAJM,MAIA,IAAIX,MAAM,CAACnF,IAAP,KAAgB,QAAhB,IAA4BmH,QAAhC,EAA0C;AAC/C,eAAKrB,IAAL,GAAYqB,QAAZ;AACD;;AAED,eAAO1D,gBAAP;AACD,OAxJiB;AA0JlBsF,MAAAA,MAAM,EAAE,gBAAS7B,UAAT,EAAqB;AAC3B,aAAK,IAAIY,CAAC,GAAG,KAAKV,UAAL,CAAgB9I,MAAhB,GAAyB,CAAtC,EAAyCwJ,CAAC,IAAI,CAA9C,EAAiD,EAAEA,CAAnD,EAAsD;AACpD,cAAIf,KAAK,GAAG,KAAKK,UAAL,CAAgBU,CAAhB,CAAZ;;AACA,cAAIf,KAAK,CAACG,UAAN,KAAqBA,UAAzB,EAAqC;AACnC,iBAAK4B,QAAL,CAAc/B,KAAK,CAACO,UAApB,EAAgCP,KAAK,CAACI,QAAtC;AACAE,YAAAA,aAAa,CAACN,KAAD,CAAb;AACA,mBAAOtD,gBAAP;AACD;AACF;AACF,OAnKiB;AAqKlB,eAAS,gBAASuD,MAAT,EAAiB;AACxB,aAAK,IAAIc,CAAC,GAAG,KAAKV,UAAL,CAAgB9I,MAAhB,GAAyB,CAAtC,EAAyCwJ,CAAC,IAAI,CAA9C,EAAiD,EAAEA,CAAnD,EAAsD;AACpD,cAAIf,KAAK,GAAG,KAAKK,UAAL,CAAgBU,CAAhB,CAAZ;;AACA,cAAIf,KAAK,CAACC,MAAN,KAAiBA,MAArB,EAA6B;AAC3B,gBAAI7B,MAAM,GAAG4B,KAAK,CAACO,UAAnB;;AACA,gBAAInC,MAAM,CAACnF,IAAP,KAAgB,OAApB,EAA6B;AAC3B,kBAAIgJ,MAAM,GAAG7D,MAAM,CAAClF,GAApB;AACAoH,cAAAA,aAAa,CAACN,KAAD,CAAb;AACD;;AACD,mBAAOiC,MAAP;AACD;AACF,SAXuB;;;;AAexB,cAAM,IAAI/C,KAAJ,CAAU,uBAAV,CAAN;AACD,OArLiB;AAuLlBgD,MAAAA,aAAa,EAAE,uBAAStB,QAAT,EAAmBhB,UAAnB,EAA+BC,OAA/B,EAAwC;AACrD,aAAKT,QAAL,GAAgB;AACd1E,UAAAA,QAAQ,EAAEuC,MAAM,CAAC2D,QAAD,CADF;AAEdhB,UAAAA,UAAU,EAAEA,UAFE;AAGdC,UAAAA,OAAO,EAAEA;AAHK,SAAhB;;AAMA,YAAI,KAAKxC,MAAL,KAAgB,MAApB,EAA4B;;;AAG1B,eAAKnE,GAAL,GAAWoB,WAAX;AACD;;AAED,eAAOoC,gBAAP;AACD;AArMiB,KAApB,CAlgBgC;;;;;AA8sBhC,WAAOxC,OAAP;AAED,GAhtBc;;;;AAqtBb,GAA6BiI,MAAM,CAACjI,OAApC,CArtBa,CAAf;;AAwtBA,MAAI;AACFkI,IAAAA,kBAAkB,GAAGnI,OAArB;AACD,GAFD,CAEE,OAAOoI,oBAAP,EAA6B;;;;;;;;;;;AAW7B,QAAI,OAAOC,UAAP,KAAsB,QAA1B,EAAoC;AAClCA,MAAAA,UAAU,CAACF,kBAAX,GAAgCnI,OAAhC;AACD,KAFD,MAEO;AACLsI,MAAAA,QAAQ,CAAC,GAAD,EAAM,wBAAN,CAAR,CAAwCtI,OAAxC;AACD;;;;AC/tBH;;;;;;;;;;;;;;;;;;AAkBA,IAAauI,YAAb;AACE,wBACUC,MADV,EAEU3M,OAFV;AACU,eAAA,GAAA2M,MAAA;AACA,gBAAA,GAAA3M,OAAA;AACN;;AAJN;;AAAA,SAmBU4M,QAnBV,GAmBU,kBAASnK,SAAT;;;AACN,8BAAO,KAAK5B,SAAZ,qBAAO,gBAAgB4C,MAAhB,CAAuB3C,IAAvB,CAA4B,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACZ,IAAL,KAAcsC,SAAxB;AAAA,KAA5B,CAAP;AACD,GArBH;;AAAA,eAuBiBoK,YAvBjB,GAuBU,sBAAoBpK,SAApB;AACN,WAAOA,SAAS,CAAC2I,MAAV,CAAiB,CAAjB,EAAoB0B,WAApB,KAAoCrK,SAAS,CAAC4I,KAAV,CAAgB,CAAhB,CAA3C;AACD,GAzBH;;AAAA,SA2BU0B,cA3BV,GA2BU,wBAAetK,SAAf,EAAkCuK,SAAlC;;;AACN,6BAAO,KAAKJ,QAAL,CAAcnK,SAAd,CAAP,qBAAO,eAA0BvB,MAA1B,CAAiCJ,IAAjC,CACL,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACoC,IAAL,KAAc6J,SAAd,IAA2B,CAACjM,IAAI,CAACkM,MAA3C;AAAA,KADK,CAAP;AAGD,GA/BH;;AAAA,SAiCUC,mBAjCV,GAiCU,6BAAoBzK,SAApB;;;AACN,8BAAO,KAAKmK,QAAL,CAAcnK,SAAd,CAAP,8CAAO,gBAA0BvB,MAA1B,CAAiCJ,IAAjC,CAAsC,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACoM,IAAf;AAAA,KAAtC,CAAP,qBAAO,sBAA4DhN,IAAnE;AACD,GAnCH;;AAAA,SAqCUiN,iBArCV,GAqCU,2BAAkB3K,SAAlB,EAAqCU,IAArC;;;AACN,8BAAO,KAAKyJ,QAAL,CAAcnK,SAAd,CAAP,qBAAO,gBAA0BvB,MAA1B,CAAiCT,MAAjC,CACL,UAACM,IAAD;AAAA;;AAAA,aACE,wBAAAA,IAAI,CAACC,aAAL,yCAAoBL,QAApB,CAA6B,WAA7B,+BACAI,IAAI,CAACC,aADL,qBACA,qBAAoBL,QAApB,CAA6BwC,IAA7B,CADA,CADF;AAAA,KADK,CAAP;AAKD,GA3CH;;AAAA,SA6CgBkK,YA7ChB;AAAA,oFA6CU,iBAAmB5K,SAAnB,EAAsCxB,KAAtC,EAAyDqM,KAAzD;AAAA;;AAAA;AAAA;AAAA;AAAA;AACAnN,cAAAA,IADA,GACOuM,YAAY,CAACG,YAAb,CAA0BpK,SAA1B,CADP;AAEA8K,cAAAA,OAFA,GAEU,KAAKL,mBAAL,CAAyBzK,SAAzB,CAFV;AAGA+K,cAAAA,YAHA,GAGe,KAAKN,mBAAL,CAAyBjM,KAAK,CAACkC,IAA/B,CAHf;;AAAA,oBAIFoK,OAAO,IAAIC,YAAX,IAA2B,CAACvM,KAAK,CAACwM,UAJhC;AAAA;AAAA;AAAA;;AAKEC,cAAAA,WALF,GAKgBzM,KAAK,CAACgM,MAAN,oBACbhM,KAAK,CAACd,IADO,IACA;AAAEoC,gBAAAA,MAAM,yBAAKiL,YAAL,IAAoB,IAApB;AAAR,eADA,UAEhB,EAPA;AAAA;AAAA,qBAQkB,KAAKb,MAAL,CAAYxM,IAAZ,EAAkBwN,QAAlB,CAA2B;AAC/CL,gBAAAA,KAAK,EAALA,KAD+C;AAE/C/K,gBAAAA,MAAM,sCACHgL,OADG,IACO,IADP,cAEDG,WAFC;AAFyC,eAA3B,CARlB;;AAAA;AAQEE,cAAAA,OARF;AAAA,0DAeiBA,OAfjB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeOrF,cAAAA,MAfP;;AAAA,kBAgBItH,KAAK,CAACgM,MAAN,IAAgB1E,MAAM,CAACtH,KAAK,CAACd,IAAP,CAAN,CAAmBsB,MAAnB,KAA8B,CAhBlD;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAiBM,KAAKkL,MAAL,CAAYxM,IAAZ,EAAkB0N,MAAlB,CAAyB;AAC7BP,gBAAAA,KAAK,uBACFC,OADE,IACQhF,MAAM,CAACgF,OAAD,CADd,SADwB;AAI7BO,gBAAAA,IAAI,qBACD7M,KAAK,CAACd,IADL,IACY;AACZ4N,kBAAAA,UAAU,EAAE9M,KAAK,CAACgM,MAAN,GAAe1E,MAAM,CAACtH,KAAK,CAACd,IAAP,CAArB,GAAoC;AADpC,iBADZ;AAJyB,eAAzB,CAjBN;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7CV;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SA6EgB6N,cA7EhB;AAAA,sFA6EU,kBACNvL,SADM,EAENwL,UAFM,EAGNC,aAHM;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGNA,aAHM;AAGNA,gBAAAA,aAHM,GAGU,IAHV;AAAA;;AAKAC,cAAAA,WALA,GAK4BD,aAAa,GAC3C,CACE;AACE/N,gBAAAA,IAAI,EAAEuM,YAAY,CAACG,YAAb,CAA0BpK,SAA1B,CADR;AAEE6K,gBAAAA,KAAK,EAAEW;AAFT,eADF,CAD2C,GAO3C,EAZE;AAcAG,cAAAA,UAdA,GAca,KAAKhB,iBAAL,CAAuB3K,SAAvB,EAAkC,UAAlC,CAdb;;AAAA,mBAeF2L,UAfE;AAAA;AAAA;AAAA;;AAAA,2DAgBoBA,UAhBpB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBOC,cAAAA,SAhBP;AAAA;AAAA,qBAiBI,KAAKhB,YAAL,CAAkB5K,SAAlB,EAA6B4L,SAA7B,EAAwCJ,UAAxC,CAjBJ;;AAAA;AAAA;AAAA;;AAAA;AAqBAK,cAAAA,aArBA,GAqBgB,KAAKlB,iBAAL,CAAuB3K,SAAvB,EAAkC,SAAlC,CArBhB;;AAAA,mBAsBF6L,aAtBE;AAAA;AAAA;AAAA;;AAAA,2DAuBuBA,aAvBvB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBOC,cAAAA,YAvBP;AAwBIC,cAAAA,UAxBJ,GAwBiB,KAAKzB,cAAL,CAAoBwB,YAAY,CAACpL,IAAjC,EAAuCV,SAAvC,CAxBjB;;AAAA,mBAyBE+L,UAzBF;AAAA;AAAA;AAAA;;AAAA,oBA0BID,YAAY,CAACpL,IAAb,KAAsBV,SA1B1B;AAAA;AAAA;AAAA;;AAAA,6BA2BE0L,WAAW,CAACvK,IA3Bd;AAAA,6BA2BEuK,WA3BF;AAAA;AAAA,qBA4Bc,KAAKH,cAAL,CAAoBO,YAAY,CAACpL,IAAjC,mDACPqL,UAAU,CAACrO,IADJ,IACW8N,UADX,wBA5Bd;;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAiCEE,cAAAA,WAAW,CAACvK,IAAZ,CAAiB;AACfzD,gBAAAA,IAAI,EAAEuM,YAAY,CAACG,YAAb,CAA0BpK,SAA1B,CADS;AAEf6K,gBAAAA,KAAK,yBACFkB,UAAU,CAACrO,IADT,IACgB8N,UADhB;AAFU,eAAjB;;AAjCF;AAAA;AAAA;;AAAA;AAAA,gDA4CCE,WA5CD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7EV;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA2HE;;;;;;;;;;;;;AA3HF;;AAAA,SAwIQM,QAxIR;AAAA;AAAA;AAAA,gFAwIE;AAAA;AAAA;AAAA;AAAA;AAAA;AACE7N,cAAAA,KADF,SACEA,KADF,EAEE0M,KAFF,SAEEA,KAFF,EAGEoB,YAHF,SAGEA,YAHF;AAAA;AAAA,qBAMU,KAAKV,cAAL,CAAoBpN,KAApB,EAA2B0M,KAA3B,EAAkC,CAAC,CAACoB,YAApC,CANV;;AAAA;AAKQd,cAAAA,OALR,kBAOIhD,OAPJ;AAQWK,cAAAA,CARX,GAQe,CARf;;AAAA;AAAA,oBAQkBA,CAAC,GAAG2C,OAAO,CAACnM,MAR9B;AAAA;AAAA;AAAA;;AAAA,oBASQwJ,CAAC,GAAG,CAAJ,KAAU2C,OAAO,CAACnM,MAAlB,IAA4BiN,YATpC;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAUmB,KAAK/B,MAAL,CAAYiB,OAAO,CAAC3C,CAAD,CAAP,CAAW9K,IAAvB,EAA6BwO,UAA7B,CAAwC;AACnDrB,gBAAAA,KAAK,EAAEM,OAAO,CAAC3C,CAAD,CAAP,CAAWqC;AADiC,eAAxC,CAVnB;;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAcY,KAAKX,MAAL,CAAYiB,OAAO,CAAC3C,CAAD,CAAP,CAAW9K,IAAvB,EAA6BwO,UAA7B,CAAwC;AAC5CrB,gBAAAA,KAAK,EAAEM,OAAO,CAAC3C,CAAD,CAAP,CAAWqC;AAD0B,eAAxC,CAdZ;;AAAA;AAQsC,gBAAErC,CARxC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxIF;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,SAME;AACE,qBAAmBnH,OAAO,CAAC,gBAAD,CAA1B;AAAA,UAAQC,MAAR,YAAQA,MAAR;;AACA,aAAOA,MAAM,CAACL,IAAd;AACD;AATH;AAAA;AAAA,SAWE;;;AACE,2BAAI,KAAK1D,OAAT,aAAI,cAAc0D,IAAlB,EAAwB;AAAA;;AACtB,iCAAO,KAAK1D,OAAZ,4CAAO,eAAc0D,IAArB,qBAAO,oBAAoBG,SAA3B;AACD,OAFD,MAEO;AAAA;;AACL,gCAAO,KAAK+K,OAAZ,qBAAO,cAAc/K,SAArB;AACD;AACF;AAjBH;;AAAA;AAAA;;;ACxBA,IAAMgL,WAAW,GAAa,EAA9B;AAEA,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC3L,IAAD,EAAenD,OAAf;;;AAChC,MAAI+O,MAAM,GAAG/O,OAAH,qCAAGA,OAAO,CAAE0D,IAAZ,qBAAG,cAAeqL,MAA5B;;AACA,MAAI,CAACA,MAAL,EAAa;AAAA;;AACX,mBAAmBjL,OAAO,CAAC,gBAAD,CAA1B;AAAA,QAAQC,MAAR,YAAQA,MAAR;;AACAgL,IAAAA,MAAM,mBAAGhL,MAAM,CAACL,IAAV,qBAAG,aAAaqL,MAAtB;AACD;;AACDF,EAAAA,WAAW,CAACjL,IAAZ,CAAiBT,IAAjB;AACA,MAAM6L,gBAAgB,GAAGD,MAAM,wBAAOA,MAAP,qBAAO,QAAQC,gBAAR,CAAyBrC,MAAhC,IAA0C,EAAzE;AACA,kBAAIoC,MAAJ,aAAI,SAAQC,gBAAR,CAAyBpO,KAA7B,EACEoO,gBAAgB,CAACpL,IAAjB,OAAAoL,gBAAgB,EAASD,MAAM,CAACC,gBAAP,CAAwBpO,KAAjC,CAAhB;AAEF,MAAMqO,SAAS,GAAGD,gBAAgB,CAAClO,IAAjB,CAAsB,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACZ,IAAL,KAAcgD,IAAxB;AAAA,GAAtB,CAAlB;;AACA,MAAI8L,SAAJ,EAAe;AACb,QAAIA,SAAS,CAAC/N,MAAV,CAAiBO,MAAjB,KAA4B,CAAhC,EAAmC,OAAO,IAAP;;AACnC,yDAAoBwN,SAAS,CAAC/N,MAA9B,wCAAsC;AAAA,UAA3BD,KAA2B;AACpC,UAAM+L,SAAS,GAAGkC,YAAY,CAACjO,KAAD,EAAQjB,OAAR,CAA9B;;AACA,UACEgN,SAAS,CAAC7J,IAAV,KAAmBA,IAAnB,IACA6J,SAAS,CAACmC,QAAV,KAAuB,kBADvB,IAEA,CAACN,WAAW,CAAClO,QAAZ,CAAqBqM,SAAS,CAAC7J,IAA/B,CAHH,EAIE;AACA,YAAMgG,KAAK,GAAG2F,kBAAkB,CAAC9B,SAAS,CAAC7J,IAAX,EAA2BnD,OAA3B,CAAhC;AACA,YAAImJ,KAAJ,EAAW,OAAO,IAAP;AACZ;AACF;AACF;;AACD,SAAO,KAAP;AACD,CA3BM;AA6BP,IAAa+F,YAAY,GAAG,SAAfA,YAAe,CAC1BjO,KAD0B,EAE1BjB,OAF0B;AAI1B,MAAIoP,KAAK,GAAW,CAApB;;AACA,MACEpP,OAAO,QAAP,IAAAA,OAAO,CAAEqP,kCAAT,IACApO,KAAK,CAACqO,UAAN,CAAiB7N,MAAjB,GAA0B,CAD1B,IAECR,KAAK,CAACqO,UAAN,CAAiB,CAAjB,EAAoBnM,IAApB,CAAoCoM,QAApC,CAA6C,4BAA7C,CAHH,EAIE;AACA,WAAOtO,KAAK,CAACqO,UAAN,CAAiBF,KAAjB,CAAP;AACD;;AACD,MACEnO,KAAK,CAACqO,UAAN,CAAiB7N,MAAjB,GAA0B,CAA1B,KACCR,KAAK,CAACqO,UAAN,CAAiB,CAAjB,EAAoBH,QAApB,KAAiC,kBAAjC,IACClO,KAAK,CAACqO,UAAN,CAAiB,CAAjB,EAAoBrC,MADrB,IAEChM,KAAK,CAACqO,UAAN,CAAiB,CAAjB,EAAoBnM,IAApB,KAA6B,MAH/B,CADF,EAKE;AACAiM,IAAAA,KAAK,GAAG,CAAR;AACD;;AACD,SAAOnO,KAAK,CAACqO,UAAN,CAAiBF,KAAjB,CAAP;AACD,CArBM;AAuBP,SAAgBI,qBAAqBxP;;;AACnC,MAAI+O,MAAM,GAAG/O,OAAH,sCAAGA,OAAO,CAAE0D,IAAZ,qBAAG,eAAeqL,MAA5B;;AACA,MAAI,CAACA,MAAL,EAAa;AAAA;;AACX,oBAAmBjL,OAAO,CAAC,gBAAD,CAA1B;AAAA,QAAQC,MAAR,aAAQA,MAAR;;AACAgL,IAAAA,MAAM,oBAAGhL,MAAM,CAACL,IAAV,qBAAG,cAAaqL,MAAtB;AACD;;AACD,MAAIU,WAAW,uEAAf;;AAOA,MAAIV,MAAJ,EAAY;AAAA;;AACV,QAAMW,KAAK,aAAOX,MAAM,CAACY,SAAP,CAAiBhD,MAAxB,CAAX;AACA,QAAIoC,MAAM,CAACY,SAAP,CAAiB/O,KAArB,EAA4B8O,KAAK,CAAC9L,IAAN,OAAA8L,KAAK,EAASX,MAAM,CAACY,SAAP,CAAiB/O,KAA1B,CAAL;AAC5B8O,IAAAA,KAAK,CAAC3M,OAAN,CAAc,UAAChC,IAAD;AACZ0O,MAAAA,WAAW,cAAY1O,IAAI,CAACZ,IAAjB,OAAX;AACAY,MAAAA,IAAI,CAACoG,MAAL,CAAYpE,OAAZ,CAAoB,UAAC6M,KAAD;AAClBH,QAAAA,WAAW,mBACTG,KADF;AAED,OAHD;AAIAH,MAAAA,WAAW,eAAX;AAGD,KATD;AAUA,QAAMT,gBAAgB,aAAOD,MAAM,CAACC,gBAAP,CAAwBrC,MAA/B,CAAtB;AACA,QAAIoC,MAAM,CAACC,gBAAP,CAAwBpO,KAA5B,EACEoO,gBAAgB,CAACpL,IAAjB,OAAAoL,gBAAgB,EAASD,MAAM,CAACC,gBAAP,CAAwBpO,KAAjC,CAAhB;AAEFoO,IAAAA,gBAAgB,CAACjM,OAAjB,CAAyB,UAAC8M,KAAD;AACvB,UAAIA,KAAK,CAAC3O,MAAN,CAAaO,MAAb,GAAsB,CAA1B,EAA6B;AAC3BgO,QAAAA,WAAW,eAAaI,KAAK,CAAC1P,IAAnB,eAAX;AAEA,YAAM2P,WAAW,GACf,QAAO9P,OAAP,oBAAOA,OAAO,CAAE+P,YAAhB,MAAiC,UAAjC,GACI/P,OAAO,CAAC+P,YAAR,CAAqBF,KAArB,CADJ,GAEIA,KAAK,CAAC3O,MAHZ;AAIA4O,QAAAA,WAAW,CACRrP,MADH,CACU,UAACQ,KAAD;AAAA;;AAAA,iBAAW,EAACjB,OAAD,qCAACA,OAAO,CAAEgQ,aAAV,aAAC,sBAAwBrP,QAAxB,CAAiCM,KAAK,CAACd,IAAvC,CAAD,CAAX;AAAA,SADV,EAEG4C,OAFH,CAEW,UAAC9B,KAAD;AACP,cAAMgO,SAAS,GAAGC,YAAY,CAACjO,KAAD,EAAQjB,OAAR,CAA9B;AACA,cAAMiQ,YAAY,GAChBhB,SAAS,CAACE,QAAV,KAAuB,kBAAvB,IACAL,kBAAkB,CAACG,SAAS,CAAC9L,IAAX,EAA2BnD,OAA3B,CAFpB;;AAGA,cAAI,CAACiQ,YAAL,EAAmB;AACjBR,YAAAA,WAAW,IAAOxO,KAAK,CAACd,IAAb,WACT8O,SAAS,CAAChC,MAAV,SAAuBgC,SAAS,CAAC9L,IAAjC,UAA4C8L,SAAS,CAAC9L,IAD7C,KAERlC,KAAK,CAACwM,UAAN,GAAmB,GAAnB,GAAyB,EAFjB,gBAAX;AAID;AACF,SAbH;AAcAgC,QAAAA,WAAW,iBAAX;AAGD;AACF,KA1BD;AA4BA,gBAAAV,MAAM,SAAN,qBAAQmB,iBAAR,CAA0BvD,MAA1B,CACGlM,MADH,CAEI,UAAC0C,IAAD;AAAA,aACEA,IAAI,CAAChD,IAAL,CAAUQ,QAAV,CAAmB,WAAnB,KACAwC,IAAI,CAAChD,IAAL,CAAUoP,QAAV,CAAmB,iBAAnB,CAFF;AAAA,KAFJ,EAMGxM,OANH,CAMW,UAACI,IAAD;AACPsM,MAAAA,WAAW,cAAYtM,IAAI,CAAChD,IAAjB,eAAX;AAEAgD,MAAAA,IAAI,CAACjC,MAAL,CACGT,MADH,CACU,UAACQ,KAAD;AAAA;;AAAA,eAAW,EAACjB,OAAD,sCAACA,OAAO,CAAEgQ,aAAV,aAAC,uBAAwBrP,QAAxB,CAAiCM,KAAK,CAACd,IAAvC,CAAD,CAAX;AAAA,OADV,EAEG4C,OAFH,CAEW,UAAC9B,KAAD;AACPwO,QAAAA,WAAW,IAAOxO,KAAK,CAACd,IAAb,WACTc,KAAK,CAACkP,UAAN,CAAiBlD,MAAjB,SACQhM,KAAK,CAACkP,UAAN,CAAiBhN,IADzB,UAEIlC,KAAK,CAACkP,UAAN,CAAiBhN,IAHZ,KAIR,CAAClC,KAAK,CAACmP,UAAP,GAAoB,GAApB,GAA0B,EAJlB,gBAAX;AAMD,OATH;AAUAX,MAAAA,WAAW,iBAAX;AAGD,KAtBH;AAuBD;;AACD,SAAOA,WAAP;AACD;AAED,IAAaY,SAAS,GAAG,SAAZA,SAAY,CAACrQ,OAAD;AACvB,MAAMsQ,GAAG,GAAGxM,OAAO,CAAC,aAAD,CAAnB;;AACA,SAAOwM,GAAP,yFACId,oBAAoB,CAACxP,OAAD,CADxB;AAGD,CALM;AAOP,IAAauQ,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpCxB,MADoC,EAEpCyB,IAFoC;MAEpCA;AAAAA,IAAAA,OAAe;;;AAEf,kBAAwB1M,OAAO,CAAC,SAAD,CAA/B;AAAA,MAAQ2M,WAAR,aAAQA,WAAR;;AACAC,EAAAA,aAAa,CAACF,IAAD,EAAOC,WAAW,CAAC1B,MAAD,CAAlB,CAAb;AACD,CANM;;;;"}